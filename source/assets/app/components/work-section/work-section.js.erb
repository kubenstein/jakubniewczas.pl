angular.module('jakubniewczas')
  .directive('workSection', ['$rootScope', '$http', '$translate', function($rootScope, $http, $translate) {

    return {
      require: 'listSection',
      link: function(scope, element, attrs, listSection) {


        function loadData() {
          $http.get('/api/v1/works/'+ $translate.use() +'.json').then(function(response) {
            listSection.setItems(response.data);
          });
        }
        
        $rootScope.$on('$translateChangeSuccess', function() {
          loadData();
        });
        loadData();
        
      }
    }
  }])