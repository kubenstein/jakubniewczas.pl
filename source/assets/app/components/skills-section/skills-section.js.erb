angular.module('jakubniewczas')
  .directive('skillsSection', ['$rootScope', '$http', '$translate', function($rootScope, $http, $translate) {

    return {
      scope: {
        name: '@',
        text: '@'
      },
      templateUrl: '<%= ng_template_url("skills-section/") %>',
      link: function(scope, element, attrs) {

        function loadData() {
          $http.get('/api/v1/skills/'+ $translate.use() +'.json').then(function(response) {
            scope.items = response.data;
          });
        }
        
        $rootScope.$on('$translateChangeSuccess', function() {
          loadData();
        });
        loadData();

      }
    }
  }])